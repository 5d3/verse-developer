<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Verse Developer Action Sample</title>

    <style>
      pre {
        margin-bottom: 50px;
      }
    </style>

    <script>
      /**
       * Print out Verse API data for all the action samples
       */
      window.addEventListener("message", function(event) {
        var eventData = event.data;

        console.log(event);

        document.getElementById("status").innerHTML = "";

        document.getElementById("messages").innerHTML = "Message received: " + "<hr><pre id='json'></pre>";

        document.getElementById("json").innerText = JSON.stringify(eventData, null, 2);

        /**
         * Message from Verse to check whether your web application is ready.
         */
        if (eventData.verseApiType === "com.ibm.verse.ping.application.loaded") {
          var loaded_message = {
            verseApiType : "com.ibm.verse.application.loaded"
          };
          /**
           * Your application must send a message back to Verse
           * to identify that it's ready to receive data from Verse.
           */
          event.source.postMessage(loaded_message, event.origin);
        }
      }, false);
    </script>
  </head>

  <body>
    <h1>Verse Developer Action Sample</h1>
    <div id="status">Waiting for messages from Verse.</div>
    <div id="query-str"></div>
    <div id="messages"></div>
  </body>
</html>
